import{r as d,u as N,L as E,T as f,a as p,j as e,b as j,C as v,c as b,A as L,U as x,I as R,B as k,d as I}from"./index-BkwTl7d_.js";const S=(t,n=!1,c=()=>({}))=>{const[r,l]=d.useState(t),[i,o]=d.useState({});return{values:r,setValues:l,errors:i,setErrors:o,handleChange:s=>{const{name:a,value:g}=s.target;if(l({...r,[a]:g}),n){const w=c({...r,[a]:g});o(w)}},runValidation:()=>{const s=c(r);return o(s),Object.keys(s).length===0},resetForm:()=>{l(t),o({})}}},y=t=>{let n={};return t.username||(n.username="Username is required."),t.password||(n.password="Password is required."),n},C={username:"",password:""},A=()=>{const{values:t,handleChange:n,runValidation:c,errors:r}=S(C,!0,y),[l,i]=d.useState(!1),o=N();d.useEffect(()=>{document.title=E,localStorage.getItem(f)&&o(p)},[]);const m=s=>{const a=s.data.data.accessToken;localStorage.setItem(f,a),localStorage.setItem(I,t.username),window.dispatchEvent(new Event("token-set"))},u=()=>{try{const s=navigator.userAgent||"";return/Edg\//.test(s)?"Edge":/OPR\//.test(s)?"Opera":/Chrome\//.test(s)&&!/Edg\//.test(s)&&!/OPR\//.test(s)?"Chrome":/Firefox\//.test(s)?"Firefox":/Safari\//.test(s)&&!/Chrome\//.test(s)?"Safari":s||"Unknown"}catch{return null}},h=s=>{s.preventDefault(),c()&&(i(!0),b.post(L,{username:t.username,password:t.password,deviceInfo:u()}).then(a=>{i(!1),a.status===200?(m(a),o(p)):alert(x)}).catch(a=>{if(i(!1),a.response)switch(a.response.status){case 403:alert(a.response.data.message);break;case 400:alert(k);break;case 500:alert(R);break;default:alert(x)}else alert(a.message||"An error occurred");console.error("Login error",a)}))};return e.jsx("div",{className:"container d-flex align-items-center justify-content-center",style:{marginTop:"10vh"},children:e.jsxs("div",{className:"row w-100 shadow",style:{maxWidth:"900px",height:"50vh"},children:[e.jsx("div",{className:"col-md-6 d-none d-md-block",style:{background:"#0d1117"}}),e.jsx("div",{className:"col-md-6 p-4 d-flex align-items-center",style:{background:"#C1BBBB"},children:e.jsxs("form",{onSubmit:h,className:"w-100",style:{marginLeft:"5vh"},children:[e.jsx("h2",{className:"mb-4",children:"Log In"}),e.jsxs("div",{className:"form-floating mb-3",style:{width:"75%"},children:[e.jsx("input",{type:"text",className:"form-control",id:"floatingInput",name:"username",placeholder:"Username",value:t.username,onChange:n}),e.jsx("label",{htmlFor:"floatingInput",children:"Username"}),r.username&&e.jsx("small",{className:"text-danger",children:r.username})]}),e.jsxs("div",{className:"form-floating mb-3",style:{width:"75%"},children:[e.jsx("input",{type:"password",className:"form-control",id:"floatingPassword",name:"password",placeholder:"Password",value:t.password,onChange:n}),e.jsx("label",{htmlFor:"floatingPassword",children:"Password"}),r.password&&e.jsx("small",{className:"text-danger",children:r.password})]}),e.jsxs("p",{children:["Donâ€™t have an account?"," ",e.jsx(j,{to:v,children:"Create one"})]}),e.jsx("button",{type:"submit",className:"btn btn-dark w-75",children:l?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"})," Loading..."]}):"Log In"})]})})]})})};export{A as default};
